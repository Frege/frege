language: java

jdk:
  - oraclejdk8
  - oraclejdk7
  - openjdk7

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -y byacc byacc-j perl-byacc

before_script:
  - mkdir -p build dist doc
  # Get the latest fregec.jar to compile the compiler
  - curl -L -o fregec.jar https://github.com/Frege/frege/releases/download/3.22.324/frege3.22.367-g2737683.jar

env:
  - YACC=byacc

script:
  - make compiler1 YACC=$YACC || true   # until issue#100 is fixed
  - make runtime compiler fregec.jar dist YACC=$YACC && java -cp fregec.jar frege.tools.Quick -v fregec.jar

matrix:
  include:
    - jdk: oraclejdk8
      env: YACC=byaccj
    - jdk: oraclejdk8
      env: YACC=pbyacc
